<!DOCTYPE html>
<html lang="zh-Hans">

<!-- Head tag -->
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!--Description-->
    
        <meta name="description" content="年轻且优秀，颓废且积极">
    

    <!--Author-->
    
        <meta name="author" content="叶一片">
    

    <!-- Title -->
    
    <title>ArcGIS | 我是叶一片</title>

    <!-- Bootstrap Core CSS -->
    <link href="//cdn.jsdelivr.net/npm/bootstrap@3.3.6/dist/css/bootstrap.min.css" rel="stylesheet">

    <!-- Custom CSS -->
    
<link rel="stylesheet" href="/css/style.css">


    <!-- Custom Fonts -->
    <link href="//cdn.jsdelivr.net/npm/font-awesome@4.5.0/css/font-awesome.min.css" rel="stylesheet" type="text/css">
    <link href='//fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800' rel='stylesheet' type='text/css'>
    <link href='//fonts.googleapis.com/css?family=Noto+Serif:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800' rel='stylesheet' type='text/css'>

    <!-- jQuery -->
    <script src="//cdn.bootcss.com/jquery/2.2.1/jquery.min.js"></script>
    <!-- Bootstrap -->
    <script src="//cdn.jsdelivr.net/npm/bootstrap@3.3.6/dist/js/bootstrap.min.js"></script>

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
    <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->
<meta name="generator" content="Hexo 7.1.1"><link rel="alternate" href="/atom.xml" title="我是叶一片" type="application/atom+xml">
</head>


<body>

    <!-- Content -->
    <section class="article-container">
    <!-- Back Home -->
    <a class="nav-back" href="/">
    <i class="fa fa-puzzle-piece"></i>
</a>

        <!-- Page Header -->
        <header class="intro-header">
            <div class="container">
                <div class="row">
                    <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                        <div class="post-heading">
                            <h1>
                                ArcGIS
                            </h1>
                        </div>
                    </div>
                </div>
            </div>
        </header>

        <!-- Post Content -->
        <article>
            <div class="container">
                <div class="row">
                    <!-- Post Main Content -->
                    <div class="post-content col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                        <p>ArcGIS API for JavaScript的简单使用</p>
<span id="more"></span>

<h2 id="一、创建一个2d地图"><a href="#一、创建一个2d地图" class="headerlink" title="一、创建一个2d地图"></a>一、创建一个2d地图</h2><p>介绍：使用ArcGIS API for JavaScript创建一个交互式地图。我们将通过以下步骤来实现：</p>
<ol>
<li>引入ArcGIS API for JavaScript库</li>
<li>配置API密钥</li>
<li>创建地图对象</li>
<li>设置地图视图</li>
<li>添加地图图层</li>
<li>控制地图视图</li>
</ol>
<h3 id="1-引入ArcGIS-API-for-JavaScript库"><a href="#1-引入ArcGIS-API-for-JavaScript库" class="headerlink" title="1. 引入ArcGIS API for JavaScript库"></a>1. 引入ArcGIS API for JavaScript库</h3><p>首先，需要在HTML文件中引入ArcGIS API for JavaScript库。在<code>&lt;head&gt;</code>标签内添加以下代码：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://js.arcgis.com/4.28/&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="2-配置API密钥"><a href="#2-配置API密钥" class="headerlink" title="2. 配置API密钥"></a>2. 配置API密钥</h3><p>接下来，需要配置API密钥。在<code>&lt;script&gt;</code>标签内添加以下代码：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">require</span>([<span class="string">&quot;esri/config&quot;</span>], <span class="keyword">function</span> (<span class="params">esriConfig</span>) &#123;</span><br><span class="line">    esriConfig.<span class="property">apiKey</span> = <span class="string">&quot;您的API密钥&quot;</span>;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>请确保替换<code>&quot;您的API密钥&quot;</code>为您自己的ArcGIS API密钥。</p>
<p>密钥获得链接：<a target="_blank" rel="noopener" href="https://developers.arcgis.com/api-keys/">https://developers.arcgis.com/api-keys/</a></p>
<p>注册时尽量选择gmail注册，国内邮箱基本不成功。</p>
<img src='https://pic.imgdb.cn/item/65e714149f345e8d03a35dc2.jpg' width = "600" height = "auto"  align=center/>

<h3 id="3-创建地图对象"><a href="#3-创建地图对象" class="headerlink" title="3. 创建地图对象"></a>3. 创建地图对象</h3><p>创建一个地图对象。在<code>&lt;script&gt;</code>标签内添加以下代码：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">require</span>([<span class="string">&quot;esri/Map&quot;</span>, <span class="string">&quot;esri/views/MapView&quot;</span>], <span class="keyword">function</span> (<span class="params"><span class="built_in">Map</span>, MapView</span>) &#123;</span><br><span class="line">    <span class="keyword">var</span> map = <span class="keyword">new</span> <span class="title class_">Map</span>(&#123;</span><br><span class="line">        <span class="attr">basemap</span>: <span class="string">&quot;satellite&quot;</span></span><br><span class="line">    &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>这里选择了卫星底图，但也可以选择其他底图，如<code>&quot;topo-vector&quot;</code>、<code>&quot;streets&quot;</code>或<code>&quot;oceans&quot;</code>。</p>
<h3 id="4-设置地图视图"><a href="#4-设置地图视图" class="headerlink" title="4. 设置地图视图"></a>4. 设置地图视图</h3><p>接下来，需要设置地图视图。在<code>&lt;script&gt;</code>标签内添加以下代码：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> mapview = <span class="keyword">new</span> <span class="title class_">MapView</span>(&#123;</span><br><span class="line">    <span class="attr">center</span>: [<span class="number">106.526318</span>, <span class="number">29.34491</span>],</span><br><span class="line">    <span class="attr">map</span>: map,</span><br><span class="line">    <span class="attr">container</span>: <span class="string">&quot;container&quot;</span>,</span><br><span class="line">    <span class="attr">zoom</span>: <span class="number">16</span>,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>这里设置了地图的中心点坐标、地图对象、容器元素和缩放级别。请确保替换<code>&quot;container&quot;</code>为您的HTML元素的ID。</p>
<p>所有代码如下</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;https://js.arcgis.com/4.28/esri/themes/light/main.css&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://js.arcgis.com/4.28/&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="selector-tag">html</span>,<span class="selector-tag">body</span>,<span class="selector-id">#container</span>&#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">padding</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">margin</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">width</span>: <span class="number">100%</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">height</span>: <span class="number">100%</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;container&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="built_in">require</span>([<span class="string">&quot;esri/config&quot;</span>, <span class="string">&quot;esri/Map&quot;</span>, <span class="string">&quot;esri/views/MapView&quot;</span>], <span class="keyword">function</span> (<span class="params">esriConfig, <span class="built_in">Map</span>, MapView</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        esriConfig.<span class="property">apiKey</span>=<span class="string">&quot;AAPK547bf24978cc475ba9bbfcd09f845547FlVzLSN04E7LSO6MiSa0p3J2LVr4Rf_M0vi-GxYX1N_Q_Yg2plStJ_g8ZWXeTWge&quot;</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">var</span> map = <span class="keyword">new</span> <span class="title class_">Map</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// basemap: &quot;topo-vector&quot;</span></span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// basemap:&quot;streets&quot;</span></span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// basemap:&quot;oceans&quot;</span></span></span><br><span class="line"><span class="language-javascript">            <span class="attr">basemap</span>:<span class="string">&quot;satellite&quot;</span></span></span><br><span class="line"><span class="language-javascript">        &#125;)</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">console</span>.<span class="title function_">log</span>(map)</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">var</span> mapview = <span class="keyword">new</span> <span class="title class_">MapView</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// center: [106.504962, 29.533155],</span></span></span><br><span class="line"><span class="language-javascript">            <span class="attr">center</span>: [<span class="number">106.526318</span>,<span class="number">29.34491</span>],</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">map</span>: map,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">container</span>: <span class="string">&quot;container&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">zoom</span>: <span class="number">16</span>,</span></span><br><span class="line"><span class="language-javascript">        &#125;)</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">console</span>.<span class="title function_">log</span>(mapview)</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    &#125;);</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<img src='https://pic.imgdb.cn/item/65e719529f345e8d03b6853d.jpg' width = "600" height = "auto"  align=center/>

<p>至此，已经成功创建了一个交互式地图。您可以根据需要添加更多功能和自定义设置。</p>
<h2 id="二、添加切换图层和小部件"><a href="#二、添加切换图层和小部件" class="headerlink" title="二、添加切换图层和小部件"></a>二、添加切换图层和小部件</h2><h3 id="1-创建地图和视图"><a href="#1-创建地图和视图" class="headerlink" title="1.创建地图和视图"></a>1.创建地图和视图</h3><p>可以在上述代码进行添加，也可以自行在新建一个。</p>
<p>我们需要创建一个地图对象和一个场景视图对象。我们将使用<code>require</code>函数来加载所需的模块，并在回调函数中初始化这些对象。</p>
<p>请注意，使用Weather微件时，由于天气微件仅支持 SceneView 视图，因此需要将原来的MapView改为SceneView 视图</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">require</span>([<span class="string">&quot;esri/config&quot;</span>, <span class="string">&quot;esri/Map&quot;</span>, <span class="string">&quot;esri/views/SceneView&quot;</span>, <span class="string">&quot;esri/widgets/BasemapToggle&quot;</span>,<span class="string">&quot;esri/widgets/Weather&quot;</span>,<span class="string">&quot;esri/widgets/Daylight&quot;</span>],</span><br><span class="line"><span class="keyword">function</span> (<span class="params">esriConfig, <span class="built_in">Map</span>, SceneView, BasemapToggle,Weather,Daylight</span>) &#123;</span><br><span class="line">    esriConfig.<span class="property">apiKey</span> = <span class="string">&quot;你的API密钥&quot;</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> map = <span class="keyword">new</span> <span class="title class_">Map</span>(&#123;</span><br><span class="line">        <span class="attr">basemap</span>: <span class="string">&quot;topo-vector&quot;</span></span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> mapview = <span class="keyword">new</span> <span class="title class_">SceneView</span>(&#123;</span><br><span class="line">        <span class="attr">center</span>: [<span class="number">106.526318</span>, <span class="number">29.34491</span>],</span><br><span class="line">        <span class="attr">map</span>: map,</span><br><span class="line">        <span class="attr">container</span>: <span class="string">&quot;container&quot;</span>,</span><br><span class="line">        <span class="attr">zoom</span>: <span class="number">16</span>,</span><br><span class="line">        <span class="attr">ground</span>:<span class="string">&quot;world-elevation&quot;</span></span><br><span class="line">    &#125;)</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>请确保替换<code>&quot;你的API密钥&quot;</code>为你自己的ArcGIS API密钥。</p>
<h2 id="2-添加图层切换、天气和日光控件"><a href="#2-添加图层切换、天气和日光控件" class="headerlink" title="2. 添加图层切换、天气和日光控件"></a>2. 添加图层切换、天气和日光控件</h2><p>最后，我们将添加图层切换、天气和日光控件到地图视图上。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 切换图层</span></span><br><span class="line"><span class="keyword">var</span> <span class="title class_">BasemapToggle</span> = <span class="keyword">new</span> <span class="title class_">BasemapToggle</span>(&#123;</span><br><span class="line">    <span class="attr">nextBasemap</span>: <span class="string">&quot;oceans&quot;</span>,</span><br><span class="line">    <span class="attr">view</span>: mapview</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">mapview.<span class="property">ui</span>.<span class="title function_">add</span>(<span class="title class_">BasemapToggle</span>, <span class="string">&quot;bottom-right&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 天气</span></span><br><span class="line"><span class="keyword">var</span> weather = <span class="keyword">new</span> <span class="title class_">Weather</span>(&#123;</span><br><span class="line">    <span class="attr">view</span>: mapview</span><br><span class="line">&#125;)</span><br><span class="line">mapview.<span class="property">ui</span>.<span class="title function_">add</span>(weather, <span class="string">&quot;bottom-left&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">//日光</span></span><br><span class="line"><span class="keyword">var</span> daylight = <span class="keyword">new</span> <span class="title class_">Daylight</span>(&#123;</span><br><span class="line">    <span class="attr">view</span>: mapview</span><br><span class="line">&#125;)        </span><br><span class="line">mapview.<span class="property">ui</span>.<span class="title function_">add</span>(daylight, <span class="string">&quot;top-right&quot;</span>)</span><br></pre></td></tr></table></figure>

<p>所有代码如下</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;https://js.arcgis.com/4.28/esri/themes/light/main.css&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://js.arcgis.com/4.28/&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="selector-tag">html</span>,</span></span><br><span class="line"><span class="language-css">        <span class="selector-tag">body</span>,</span></span><br><span class="line"><span class="language-css">        <span class="selector-id">#container</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">padding</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">margin</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">width</span>: <span class="number">100%</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">height</span>: <span class="number">100%</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;container&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="built_in">require</span>([<span class="string">&quot;esri/config&quot;</span>, <span class="string">&quot;esri/Map&quot;</span>, <span class="string">&quot;esri/views/SceneView&quot;</span>, <span class="string">&quot;esri/widgets/BasemapToggle&quot;</span>,<span class="string">&quot;esri/widgets/Weather&quot;</span>,<span class="string">&quot;esri/widgets/Daylight&quot;</span>],</span></span><br><span class="line"><span class="language-javascript">     <span class="keyword">function</span> (<span class="params">esriConfig, <span class="built_in">Map</span>, SceneView, BasemapToggle,Weather,Daylight</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        esriConfig.<span class="property">apiKey</span> = <span class="string">&quot;AAPK547bf24978cc475ba9bbfcd09f845547FlVzLSN04E7LSO6MiSa0p3J2LVr4Rf_M0vi-GxYX1N_Q_Yg2plStJ_g8ZWXeTWge&quot;</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">var</span> map = <span class="keyword">new</span> <span class="title class_">Map</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">basemap</span>: <span class="string">&quot;topo-vector&quot;</span></span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// basemap:&quot;streets&quot;</span></span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// basemap:&quot;oceans&quot;</span></span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// basemap: &quot;satellite&quot;</span></span></span><br><span class="line"><span class="language-javascript">        &#125;)</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">console</span>.<span class="title function_">log</span>(map)</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">var</span> mapview = <span class="keyword">new</span> <span class="title class_">SceneView</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">center</span>: [<span class="number">106.526318</span>, <span class="number">29.34491</span>],</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">map</span>: map,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">container</span>: <span class="string">&quot;container&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">zoom</span>: <span class="number">16</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">ground</span>:<span class="string">&quot;world-elevation&quot;</span></span></span><br><span class="line"><span class="language-javascript">        &#125;)</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">console</span>.<span class="title function_">log</span>(mapview)</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 切换图层</span></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">var</span> <span class="title class_">BasemapToggle</span> = <span class="keyword">new</span> <span class="title class_">BasemapToggle</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">naxtBasemap</span>: <span class="string">&quot;oceans&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">view</span>: mapview</span></span><br><span class="line"><span class="language-javascript">        &#125;)</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        mapview.<span class="property">ui</span>.<span class="title function_">add</span>(<span class="title class_">BasemapToggle</span>, <span class="string">&quot;bottom-right&quot;</span>)</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 天气</span></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">var</span> weather = <span class="keyword">new</span> <span class="title class_">Weather</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">view</span>: mapview</span></span><br><span class="line"><span class="language-javascript">        &#125;)</span></span><br><span class="line"><span class="language-javascript">        mapview.<span class="property">ui</span>.<span class="title function_">add</span>(weather, <span class="string">&quot;bottom-left&quot;</span>)</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">//日光</span></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">var</span> daylight = <span class="keyword">new</span> <span class="title class_">Daylight</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="attr">view</span>: mapview</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        &#125;)        </span></span><br><span class="line"><span class="language-javascript">        mapview.<span class="property">ui</span>.<span class="title function_">add</span>(daylight, <span class="string">&quot;top-right&quot;</span>)</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    &#125;);</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<img src='https://pic.imgdb.cn/item/65e71b509f345e8d03befa51.jpg' width = "600" height = "auto"  align=center/>

<p>至此，已经成功创建了一个交互式地图。您可以根据需要添加更多功能和自定义设置。</p>
<h2 id="三、加入空间实体图层"><a href="#三、加入空间实体图层" class="headerlink" title="三、加入空间实体图层"></a>三、加入空间实体图层</h2><p>因中心点不同，建议大家重新新建文件实操。</p>
<p>导库及配置API和前面一样，我们直接创建地图和视图</p>
<h2 id="1-创建地图和视图-1"><a href="#1-创建地图和视图-1" class="headerlink" title="1. 创建地图和视图"></a>1. 创建地图和视图</h2><p>接下来，我们需要使用ArcGIS API for JavaScript创建地图和视图。在<code>&lt;script&gt;</code>标签内添加以下代码：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"> <span class="built_in">require</span>([<span class="string">&quot;esri/config&quot;</span>, <span class="string">&quot;esri/Map&quot;</span>, <span class="string">&quot;esri/views/MapView&quot;</span>], <span class="keyword">function</span> (<span class="params">esriConfig, <span class="built_in">Map</span>, MapView</span>) &#123;</span><br><span class="line">    esriConfig.<span class="property">apiKey</span> = <span class="string">&quot;你的API密钥&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> map = <span class="keyword">new</span> <span class="title class_">Map</span>(&#123;</span><br><span class="line">        <span class="attr">basemap</span>: <span class="string">&quot;satellite&quot;</span></span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> mapview = <span class="keyword">new</span> <span class="title class_">MapView</span>(&#123;</span><br><span class="line">        <span class="attr">center</span>: [-<span class="number">118.765879</span>, <span class="number">34.106389</span>],</span><br><span class="line">        <span class="attr">map</span>: map,</span><br><span class="line">        <span class="attr">container</span>: <span class="string">&quot;container&quot;</span>,</span><br><span class="line">        <span class="attr">zoom</span>: <span class="number">12</span>,</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>请确保将<code>&quot;你的API密钥&quot;</code>替换为你自己的ArcGIS API密钥。</p>
<h2 id="2-添加图层"><a href="#2-添加图层" class="headerlink" title="2. 添加图层"></a>2. 添加图层</h2><p>现在，我们可以向地图中添加图层。在<code>&lt;script&gt;</code>标签内添加以下代码：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> trailheads = <span class="keyword">new</span> <span class="title class_">FeatureLayer</span>(&#123;</span><br><span class="line">    <span class="attr">url</span>: <span class="string">&quot;https://services3.arcgis.com/GVgbJbqm8hXASVYi/arcgis/rest/services/Trailheads_Styled/FeatureServer/0&quot;</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">map.<span class="title function_">add</span>(trailheads, <span class="number">0</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> trails_styled = <span class="keyword">new</span> <span class="title class_">FeatureLayer</span>(&#123;</span><br><span class="line">   <span class="attr">url</span>:<span class="string">&quot;https://services3.arcgis.com/GVgbJbqm8hXASVYi/arcgis/rest/services/Trails_Styled/FeatureServer/0&quot;</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">map.<span class="title function_">add</span>(trails_styled, <span class="number">0</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> parks_and_open_space_styled = <span class="keyword">new</span> <span class="title class_">FeatureLayer</span>(&#123;</span><br><span class="line">    <span class="attr">url</span>:<span class="string">&quot;https://services3.arcgis.com/GVgbJbqm8hXASVYi/arcgis/rest/services/Parks_and_Open_Space_Styled/FeatureServer/0&quot;</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">map.<span class="title function_">add</span>(parks_and_open_space_styled, <span class="number">0</span>);</span><br><span class="line">    </span><br></pre></td></tr></table></figure>

<blockquote>
<p>数据来源：</p>
<p>点：<a target="_blank" rel="noopener" href="https://services3.arcgis.com/GVgbJbqm8hXASVYi/arcgis/rest/services/Trailheads_Styled/FeatureServer/0">https://services3.arcgis.com/GVgbJbqm8hXASVYi/arcgis/rest/services/Trailheads_Styled/FeatureServer/0</a></p>
<p>线：<a target="_blank" rel="noopener" href="https://services3.arcgis.com/GVgbJbqm8hXASVYi/arcgis/rest/services/Trails_Styled/FeatureServer/0">https://services3.arcgis.com/GVgbJbqm8hXASVYi/arcgis/rest/services/Trails_Styled/FeatureServer/0</a></p>
<p>面：<a target="_blank" rel="noopener" href="https://services3.arcgis.com/GVgbJbqm8hXASVYi/arcgis/rest/services/Parks_and_Open_Space_Styled/FeatureServer/0">https://services3.arcgis.com/GVgbJbqm8hXASVYi/arcgis/rest/services/Parks_and_Open_Space_Styled/FeatureServer/0</a></p>
</blockquote>
<h2 id="3-添加图例"><a href="#3-添加图例" class="headerlink" title="3. 添加图例"></a>3. 添加图例</h2><p>最后，我们可以向地图视图中添加一个图例。在<code>&lt;script&gt;</code>标签内添加以下代码：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> legend = <span class="keyword">new</span> <span class="title class_">Legend</span>(&#123;</span><br><span class="line">    <span class="attr">view</span>: mapview</span><br><span class="line">&#125;);</span><br><span class="line">mapview.<span class="property">ui</span>.<span class="title function_">add</span>(legend, <span class="string">&quot;top-right&quot;</span>);</span><br></pre></td></tr></table></figure>

<p>完成以上步骤后，你应该可以在浏览器中看到包含三个图层（Trailheads、Trails和Parks and Open Space）的地图，以及一个显示每个图层样式的图例。</p>
<p>全部代码如下</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;https://js.arcgis.com/4.28/esri/themes/light/main.css&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://js.arcgis.com/4.28/&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="selector-tag">html</span>,</span></span><br><span class="line"><span class="language-css">        <span class="selector-tag">body</span>,</span></span><br><span class="line"><span class="language-css">        <span class="selector-id">#container</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">padding</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">margin</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">width</span>: <span class="number">100%</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">height</span>: <span class="number">100%</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;container&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="built_in">require</span>([<span class="string">&quot;esri/config&quot;</span>, <span class="string">&quot;esri/Map&quot;</span>, <span class="string">&quot;esri/views/MapView&quot;</span>, <span class="string">&quot;esri/layers/FeatureLayer&quot;</span>, <span class="string">&quot;esri/widgets/Legend&quot;</span>],</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">function</span> (<span class="params">esriConfig, <span class="built_in">Map</span>, MapView, FeatureLayer, Legend</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            esriConfig.<span class="property">apiKey</span> = <span class="string">&quot;AAPK547bf24978cc475ba9bbfcd09f845547FlVzLSN04E7LSO6MiSa0p3J2LVr4Rf_M0vi-GxYX1N_Q_Yg2plStJ_g8ZWXeTWge&quot;</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">var</span> map = <span class="keyword">new</span> <span class="title class_">Map</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="comment">// basemap: &quot;topo-vector&quot;</span></span></span><br><span class="line"><span class="language-javascript">                <span class="comment">// basemap:&quot;streets&quot;</span></span></span><br><span class="line"><span class="language-javascript">                <span class="comment">// basemap:&quot;oceans&quot;</span></span></span><br><span class="line"><span class="language-javascript">                <span class="attr">basemap</span>: <span class="string">&quot;satellite&quot;</span></span></span><br><span class="line"><span class="language-javascript">            &#125;)</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">console</span>.<span class="title function_">log</span>(map)</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">var</span> mapview = <span class="keyword">new</span> <span class="title class_">MapView</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="comment">// center: [106.504962, 29.533155],</span></span></span><br><span class="line"><span class="language-javascript">                <span class="comment">// center: [106.526318,29.34491],</span></span></span><br><span class="line"><span class="language-javascript">                <span class="attr">center</span>: [-<span class="number">118.765879</span>, <span class="number">34.106389</span>],</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">                <span class="attr">map</span>: map,</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">container</span>: <span class="string">&quot;container&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">zoom</span>: <span class="number">12</span>,</span></span><br><span class="line"><span class="language-javascript">            &#125;)</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">console</span>.<span class="title function_">log</span>(mapview)</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">var</span> trailheads = <span class="keyword">new</span> <span class="title class_">FeatureLayer</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">url</span>: <span class="string">&quot;https://services3.arcgis.com/GVgbJbqm8hXASVYi/arcgis/rest/services/Trailheads_Styled/FeatureServer/0&quot;</span></span></span><br><span class="line"><span class="language-javascript">            &#125;)</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            map.<span class="title function_">add</span>(trailheads, <span class="number">0</span>)</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">var</span> trails_styled = <span class="keyword">new</span> <span class="title class_">FeatureLayer</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">               <span class="attr">url</span>:<span class="string">&quot;https://services3.arcgis.com/GVgbJbqm8hXASVYi/arcgis/rest/services/Trails_Styled/FeatureServer/0&quot;</span></span></span><br><span class="line"><span class="language-javascript">            &#125;)</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            map.<span class="title function_">add</span>(trails_styled, <span class="number">0</span>)</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">var</span> parks_and_open_space_styled = <span class="keyword">new</span> <span class="title class_">FeatureLayer</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">url</span>:<span class="string">&quot;https://services3.arcgis.com/GVgbJbqm8hXASVYi/arcgis/rest/services/Parks_and_Open_Space_Styled/FeatureServer/0&quot;</span></span></span><br><span class="line"><span class="language-javascript">            &#125;)</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            map.<span class="title function_">add</span>(parks_and_open_space_styled, <span class="number">0</span>)</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            <span class="comment">//图例</span></span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">var</span> legend = <span class="keyword">new</span> <span class="title class_">Legend</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">view</span>: mapview</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            &#125;)</span></span><br><span class="line"><span class="language-javascript">            mapview.<span class="property">ui</span>.<span class="title function_">add</span>(legend, <span class="string">&quot;top-right&quot;</span>)</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        &#125;);</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<img src='https://pic.imgdb.cn/item/65e71cc49f345e8d03c5a115.jpg' width = "600" height = "auto"  align=center/>

<p>至此，已经成功创建了一个交互式地图。您可以根据需要添加更多功能和自定义设置。</p>
<p>代码已上传至仓库：<a target="_blank" rel="noopener" href="https://gitee.com/ye-yipian/web-cfec2024/tree/master/Webgis">https://gitee.com/ye-yipian/web-cfec2024/tree/master/Webgis</a> ，请参考实验一至实验三，更多关于ArcGIS API for JavaScript的信息和示例，请参考官方文档：<a target="_blank" rel="noopener" href="https://developers.arcgis.com/javascript/latest/">https://developers.arcgis.com/javascript/latest/</a></p>


                            <!-- Meta -->
                            <div class="post-meta">
                                <hr>
                                <br>
                                <div class="post-tags">
                                    
                                        

<a href="/tags/Web/">#Web</a> <a href="/tags/WebGis/">#WebGis</a>


                                            
                                </div>
                                <div class="post-date">
                                    
                                        2024-02-28
                                    
                                </div>
                            </div>
                    </div>

                    <!-- Comments -->
                    <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                        <!-- Disqus Comments -->


                    </div>
                </div>
            </div>
        </article>
</section>

<!-- Image viewer-->

    <!-- Custom picture view-->
    <link href="/css/viewer.min.css" rel="stylesheet" />
    <script
      src="/js/viewer.min.js"
      type="text/javascript"
      charset="utf-8"
    ></script>
    
    <script type="text/javascript">
      // set image viewer
      Viewer.setDefaults({
        zoomRatio: [0.5],
        navbar: false,
        toolbar: false,
        button: false,
        title: [2, (image, imageData) => `${image.alt}`],
        show: function() {
          this.viewer.zoomTo(0.5);
        }
      });
      var imageList = document.getElementsByTagName("img");
      Array.prototype.forEach.call(imageList, element => {
        var viewer = new Viewer(element);
      });
    </script>

    

<!-- TOC -->

    <aside id="article-toc" role="navigation" class="fixed">
        <div id="article-toc-inner">
            <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%80%E3%80%81%E5%88%9B%E5%BB%BA%E4%B8%80%E4%B8%AA2d%E5%9C%B0%E5%9B%BE"><span class="toc-text">一、创建一个2d地图</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E5%BC%95%E5%85%A5ArcGIS-API-for-JavaScript%E5%BA%93"><span class="toc-text">1. 引入ArcGIS API for JavaScript库</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E9%85%8D%E7%BD%AEAPI%E5%AF%86%E9%92%A5"><span class="toc-text">2. 配置API密钥</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E5%88%9B%E5%BB%BA%E5%9C%B0%E5%9B%BE%E5%AF%B9%E8%B1%A1"><span class="toc-text">3. 创建地图对象</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-%E8%AE%BE%E7%BD%AE%E5%9C%B0%E5%9B%BE%E8%A7%86%E5%9B%BE"><span class="toc-text">4. 设置地图视图</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%8C%E3%80%81%E6%B7%BB%E5%8A%A0%E5%88%87%E6%8D%A2%E5%9B%BE%E5%B1%82%E5%92%8C%E5%B0%8F%E9%83%A8%E4%BB%B6"><span class="toc-text">二、添加切换图层和小部件</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E5%88%9B%E5%BB%BA%E5%9C%B0%E5%9B%BE%E5%92%8C%E8%A7%86%E5%9B%BE"><span class="toc-text">1.创建地图和视图</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-%E6%B7%BB%E5%8A%A0%E5%9B%BE%E5%B1%82%E5%88%87%E6%8D%A2%E3%80%81%E5%A4%A9%E6%B0%94%E5%92%8C%E6%97%A5%E5%85%89%E6%8E%A7%E4%BB%B6"><span class="toc-text">2. 添加图层切换、天气和日光控件</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%89%E3%80%81%E5%8A%A0%E5%85%A5%E7%A9%BA%E9%97%B4%E5%AE%9E%E4%BD%93%E5%9B%BE%E5%B1%82"><span class="toc-text">三、加入空间实体图层</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-%E5%88%9B%E5%BB%BA%E5%9C%B0%E5%9B%BE%E5%92%8C%E8%A7%86%E5%9B%BE-1"><span class="toc-text">1. 创建地图和视图</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-%E6%B7%BB%E5%8A%A0%E5%9B%BE%E5%B1%82"><span class="toc-text">2. 添加图层</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-%E6%B7%BB%E5%8A%A0%E5%9B%BE%E4%BE%8B"><span class="toc-text">3. 添加图例</span></a></li></ol>
        </div>
    </aside>

    <!-- Scripts -->
    <script type="text/javascript">
    console.log("© zchen9 🙋 2015-" + new Date().getFullYear());
</script>
  
    <!-- Google Analytics -->
    

    <!-- Service Worker -->
    <!-- if using service worker -->

    
</body>

</html>