<!DOCTYPE html>
<html lang="zh-Hans">

<!-- Head tag -->
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!--Description-->
    
        <meta name="description" content="年轻且优秀，颓废且积极">
    

    <!--Author-->
    
        <meta name="author" content="叶一片">
    

    <!-- Title -->
    
    <title>服务端技术 | 我是叶一片</title>

    <!-- Bootstrap Core CSS -->
    <link href="//cdn.jsdelivr.net/npm/bootstrap@3.3.6/dist/css/bootstrap.min.css" rel="stylesheet">

    <!-- Custom CSS -->
    
<link rel="stylesheet" href="/css/style.css">


    <!-- Custom Fonts -->
    <link href="//cdn.jsdelivr.net/npm/font-awesome@4.5.0/css/font-awesome.min.css" rel="stylesheet" type="text/css">
    <link href='//fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800' rel='stylesheet' type='text/css'>
    <link href='//fonts.googleapis.com/css?family=Noto+Serif:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800' rel='stylesheet' type='text/css'>

    <!-- jQuery -->
    <script src="//cdn.bootcss.com/jquery/2.2.1/jquery.min.js"></script>
    <!-- Bootstrap -->
    <script src="//cdn.jsdelivr.net/npm/bootstrap@3.3.6/dist/js/bootstrap.min.js"></script>

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
    <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->
<meta name="generator" content="Hexo 7.1.1"><link rel="alternate" href="/atom.xml" title="我是叶一片" type="application/atom+xml">
</head>


<body>

    <!-- Content -->
    <section class="article-container">
    <!-- Back Home -->
    <a class="nav-back" href="/">
    <i class="fa fa-puzzle-piece"></i>
</a>

        <!-- Page Header -->
        <header class="intro-header">
            <div class="container">
                <div class="row">
                    <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                        <div class="post-heading">
                            <h1>
                                服务端技术
                            </h1>
                        </div>
                    </div>
                </div>
            </div>
        </header>

        <!-- Post Content -->
        <article>
            <div class="container">
                <div class="row">
                    <!-- Post Main Content -->
                    <div class="post-content col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                        <p>request和response</p>
<span id="more"></span>

<h1 id="第一章-request-response对象"><a href="#第一章-request-response对象" class="headerlink" title="第一章 request&amp;response对象"></a>第一章 <strong>request&amp;response对象</strong></h1><h2 id="1-1-简介"><a href="#1-1-简介" class="headerlink" title="1.1. 简介"></a>1.1. <strong>简介</strong></h2><p>Web服务器收到客户端的http请求，会针对每一次请求，分别创建一个用于代表请求的request对象、和代表响应的response对象</p>
<p>request和response对象即然代表请求和响应，那我们要获取客户机提交过来的数据，只需要找request对象就行了。要向客户机输出数据，只需要找response对象就行了 </p>
<h1 id="第二章-HttpServletRequest"><a href="#第二章-HttpServletRequest" class="headerlink" title="第二章 HttpServletRequest"></a>第二章 <strong>HttpServletRequest</strong></h1><p>HttpServletRequest对象代表客户端的请求，当客户端通过HTTP协议访问服务器时，HTTP请求中的所有信息都封装在这个对象中，开发人员通过这个对象的方法，可以获得客户这些信息。</p>
<h2 id="2-1-常用操作："><a href="#2-1-常用操作：" class="headerlink" title="2.1. 常用操作："></a>2.1. <strong>常用操作：</strong></h2><p>通过Request对象进行的常用操作</p>
<p>获取客户机信息</p>
<p>获取请求头信息</p>
<p>获取请求参数</p>
<p>利用请求域传递对象</p>
<p>转发</p>
<h2 id="2-2-常用方法："><a href="#2-2-常用方法：" class="headerlink" title="2.2. 常用方法："></a>2.2. <strong>常用方法：</strong></h2><p><img src="https://pic.imgdb.cn/item/64a5906d1ddac507cc4cbf7a.jpg" alt="img"> </p>
<h2 id="3-3-request获取客户机信息"><a href="#3-3-request获取客户机信息" class="headerlink" title="3.3. request获取客户机信息"></a>3.3. <strong>request获取客户机信息</strong></h2><p><img src="https://pic.imgdb.cn/item/64a590831ddac507cc4d0f90.jpg"> </p>
<p>案例： </p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span></span><br><span class="line">		<span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 获得客户机iP</span></span><br><span class="line">	<span class="type">String</span> <span class="variable">remoteAddr</span> <span class="operator">=</span> request.getRemoteAddr();</span><br><span class="line">	System.out.println(<span class="string">&quot;IP:&quot;</span> + remoteAddr);</span><br><span class="line">	<span class="comment">//获取项目的虚拟目录名称</span></span><br><span class="line">	<span class="type">String</span> <span class="variable">contextPath</span> <span class="operator">=</span> request.getContextPath();</span><br><span class="line">	System.out.println(<span class="string">&quot;项目路径：&quot;</span>+contextPath);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="2-4-request获取请求头信息"><a href="#2-4-request获取请求头信息" class="headerlink" title="2.4. request获取请求头信息"></a>2.4. <strong>request获取请求头信息</strong></h2><p><img src="https://pic.imgdb.cn/item/64a5909a1ddac507cc4d6265.jpg"> </p>
<h2 id="2-5-request获取请求参数"><a href="#2-5-request获取请求参数" class="headerlink" title="2.5. request获取请求参数"></a>2.5. <strong>request获取请求参数</strong></h2><p><img src="https://pic.imgdb.cn/item/64a590a31ddac507cc4d7d7c.jpg"> </p>
<h2 id="2-6-案例：完成用户登录功能"><a href="#2-6-案例：完成用户登录功能" class="headerlink" title="2.6. 案例：完成用户登录功能"></a>2.6. <strong>案例：完成用户登录功能</strong></h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">title</span>&gt;</span>登录界面<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span> <span class="attr">style</span>=<span class="string">&quot;text-align: center&quot;</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">h3</span>&gt;</span>登录界面<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">&quot;/JavaWebDay03/LoginServlet&quot;</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">br</span>&gt;</span> 账号<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span> <span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">		密码<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;password&quot;</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span> <span class="tag">&lt;<span class="name">br</span>&gt;</span> <span class="tag">&lt;<span class="name">input</span></span></span><br><span class="line"><span class="tag">			<span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">value</span>=<span class="string">&quot;登录&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span> <span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>Servlet代码：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.yueqian.homework;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.sql.ResultSet;</span><br><span class="line"><span class="keyword">import</span> java.sql.SQLException;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.annotation.WebServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> cn.yueqian.util.JDBCUtils;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Servlet implementation class LoginServlet</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@WebServlet(&quot;/LoginServlet&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">LoginServlet</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">long</span> <span class="variable">serialVersionUID</span> <span class="operator">=</span> <span class="number">1L</span>;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span></span><br><span class="line">			<span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">		response.setContentType(<span class="string">&quot;text/html;charset=UTF-8&quot;</span>);</span><br><span class="line">		<span class="comment">//得到用户输入的信息</span></span><br><span class="line">		<span class="type">String</span> <span class="variable">username</span> <span class="operator">=</span> request.getParameter(<span class="string">&quot;username&quot;</span>);</span><br><span class="line">		<span class="type">String</span> <span class="variable">password</span> <span class="operator">=</span> request.getParameter(<span class="string">&quot;password&quot;</span>);</span><br><span class="line">		<span class="comment">//编写sql语句</span></span><br><span class="line">		<span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;select * from user where username=?&quot;</span>;</span><br><span class="line">		<span class="comment">//处理占位符</span></span><br><span class="line">		String str[] = &#123;username&#125;;</span><br><span class="line">		<span class="comment">//1.将用户名拿到数据库查询</span></span><br><span class="line">		<span class="type">ResultSet</span> <span class="variable">rs</span> <span class="operator">=</span> JDBCUtils.executeQuery(sql, str);</span><br><span class="line">		</span><br><span class="line">		<span class="keyword">try</span> &#123;</span><br><span class="line">			<span class="comment">//如果：rs.next为true,说明有这个用户</span></span><br><span class="line">			<span class="keyword">if</span>(rs.next()) &#123;</span><br><span class="line">				<span class="comment">//得到数据库中的密码</span></span><br><span class="line">				<span class="type">String</span> <span class="variable">password_db</span> <span class="operator">=</span> rs.getString(<span class="string">&quot;password&quot;</span>);</span><br><span class="line">				<span class="comment">//如果有这个用户，将客户端输入的密码与数据库中的密码比较</span></span><br><span class="line">				<span class="keyword">if</span>(password.equals(password_db)) &#123;</span><br><span class="line">					System.out.println(<span class="string">&quot;登录成功&quot;</span>);</span><br><span class="line">					response.getWriter().append(<span class="string">&quot;&lt;h1&gt;登录成功&lt;/h1&gt;&quot;</span>);</span><br><span class="line">				&#125;<span class="keyword">else</span> &#123;</span><br><span class="line">					System.out.println(<span class="string">&quot;密码错误&quot;</span>);</span><br><span class="line">					response.getWriter().append(<span class="string">&quot;&lt;h1&gt;密码错误&lt;/h1&gt;&quot;</span>);</span><br><span class="line">				&#125;</span><br><span class="line">				</span><br><span class="line">			&#125;<span class="keyword">else</span> &#123;</span><br><span class="line">				<span class="comment">//没有这个用户</span></span><br><span class="line">				System.out.println(<span class="string">&quot;没有这个用户&quot;</span>);</span><br><span class="line">				</span><br><span class="line">				response.getWriter().append(<span class="string">&quot;&lt;h1&gt;没有这个用户&lt;/h1&gt;&quot;</span>);</span><br><span class="line">			&#125;</span><br><span class="line">		&#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">			<span class="comment">// TODO Auto-generated catch block</span></span><br><span class="line">			e.printStackTrace();</span><br><span class="line">		&#125;</span><br><span class="line">		</span><br><span class="line"></span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span></span><br><span class="line">			<span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">		<span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">		doGet(request, response);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="2-7-request利用请求域传递对象"><a href="#2-7-request利用请求域传递对象" class="headerlink" title="2.7. request利用请求域传递对象"></a>2.7. <strong>request利用请求域传递对象</strong></h2><p><img src="https://pic.imgdb.cn/item/64a590b11ddac507cc4d9a1a.jpg">  将对象放到request域中：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@WebServlet(&quot;/Servlet3&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Servlet3</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">long</span> <span class="variable">serialVersionUID</span> <span class="operator">=</span> <span class="number">1L</span>;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">		<span class="comment">//创建一个用户对象</span></span><br><span class="line">		<span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">User</span>(<span class="string">&quot;张三&quot;</span>, <span class="string">&quot;123456&quot;</span>);</span><br><span class="line">		<span class="comment">//将对象放到request域中</span></span><br><span class="line">		request.setAttribute(<span class="string">&quot;user&quot;</span>, user);</span><br><span class="line">		<span class="comment">//转发到另一个Servlet4:</span></span><br><span class="line">		request.getRequestDispatcher(<span class="string">&quot;Servlet4&quot;</span>).forward(request, response);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@see</span> HttpServlet#doPost(HttpServletRequest request, HttpServletResponse response)</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">		<span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">		doGet(request, response);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//转发过后获取数据；</span></span><br><span class="line"><span class="meta">@WebServlet(&quot;/Servlet4&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Servlet4</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">long</span> <span class="variable">serialVersionUID</span> <span class="operator">=</span> <span class="number">1L</span>;</span><br><span class="line">	<span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">		<span class="comment">//接收servlet3传递过来的数据</span></span><br><span class="line">		<span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span>(User) request.getAttribute(<span class="string">&quot;user&quot;</span>);</span><br><span class="line">		System.out.println(<span class="string">&quot;传递过来的数据是：&quot;</span>+user);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@see</span> HttpServlet#doPost(HttpServletRequest request, HttpServletResponse response)</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">		<span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">		doGet(request, response);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>重定向：response.sendRedirect(“&#x2F;myDemo2&#x2F;jsp&#x2F;index.jsp”);</p>
<h2 id="2-8-转发重定向简介"><a href="#2-8-转发重定向简介" class="headerlink" title="2.8. 转发重定向简介"></a>2.8. <strong>转发重定向简介</strong></h2><p><img src="https://pic.imgdb.cn/item/64a590bf1ddac507cc4dbce0.jpg"> </p>
<h1 id="第三章-HttpServletResponse"><a href="#第三章-HttpServletResponse" class="headerlink" title="第三章 HttpServletResponse"></a>第三章 <strong>HttpServletResponse</strong></h1><p>HttpServletResponse对象服务器的响应。这个对象中封装了向客户端发送数据、发送响应头，发送响应状态码的方法。</p>
<p><img src="https://pic.imgdb.cn/item/64a590cb1ddac507cc4dd4a6.jpg"> <img src="https://pic.imgdb.cn/item/64a590da1ddac507cc4df33a.jpg"> </p>
<h2 id="3-1-response-代码案例"><a href="#3-1-response-代码案例" class="headerlink" title="3.1. response 代码案例"></a>3.1. <strong>response 代码案例</strong></h2><p>重定向（登陆页面</p>
<p>页面定时刷新（页面读秒操作）</p>
<p>禁用浏览器缓存（三个头信息）</p>
<p>向页面输出中文（乱码问题）</p>
<p>实现文件下载l 实现验证码</p>
<h2 id="3-2-response-指定状态码-头信息"><a href="#3-2-response-指定状态码-头信息" class="headerlink" title="3.2. response 指定状态码&amp;头信息"></a>3.2. <strong>response 指定状态码&amp;头信息</strong></h2><p>状态码（Status Code）</p>
<p>setStatus(int)</p>
<p>常用状态码：200、302、304、404、500 </p>
<p>头信息 (Header Info)</p>
<p>addHeader(String,String) 在原有值添加</p>
<p>setHeader(String,String) 替换原有值</p>
<h2 id="3-3-response状态码和头信息应用"><a href="#3-3-response状态码和头信息应用" class="headerlink" title="3.3. response状态码和头信息应用"></a>3.3. <strong>response状态码和头信息应用</strong></h2><p>通过response实现请求重定向。</p>
<p>请求重定向指：一个web资源收到客户端请求后，通知客户端去访问另外一个web资源，这称之为请求重定向</p>
<p>302+Location —— response.sendRedirect</p>
<p>案例：用户登陆时，用户名密码错误，重定向回登陆页面 </p>
<h2 id="3-4-发送http头，控制浏览器定时刷新网页-refresh"><a href="#3-4-发送http头，控制浏览器定时刷新网页-refresh" class="headerlink" title="3.4. 发送http头，控制浏览器定时刷新网页(refresh)"></a>3.4. <strong>发送http头，控制浏览器定时刷新网页(refresh)</strong></h2><p><img src="https://pic.imgdb.cn/item/64a590e91ddac507cc4e1241.jpg"></p>
<p>用mate标签完成：</p>
<p><img src="https://pic.imgdb.cn/item/64a590fb1ddac507cc4e3610.jpg"></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;refresh&quot;</span> <span class="attr">content</span>=<span class="string">&quot;5;/JavaWebDay03/login.html&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">title</span>&gt;</span>定时刷新<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">	在开发中，meta标签可以模拟响应操作,</span><br><span class="line">	<span class="tag">&lt;<span class="name">span</span> <span class="attr">id</span>=<span class="string">&quot;spanId&quot;</span>&gt;</span>5<span class="tag">&lt;/<span class="name">span</span>&gt;</span> 秒后跳到登录界面</span><br><span class="line">	</span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">	<span class="keyword">var</span> x = <span class="number">5</span>;</span></span><br><span class="line"><span class="language-javascript">	<span class="comment">/*定义一个方法  */</span></span></span><br><span class="line"><span class="language-javascript">	<span class="keyword">function</span> <span class="title function_">run</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">		<span class="comment">//获得span的id</span></span></span><br><span class="line"><span class="language-javascript">		<span class="keyword">var</span> span = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;spanId&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">		span.<span class="property">innerHTML</span> = x;</span></span><br><span class="line"><span class="language-javascript">		x--;</span></span><br><span class="line"><span class="language-javascript">		<span class="comment">//隔一秒执行一次</span></span></span><br><span class="line"><span class="language-javascript">		<span class="keyword">var</span> time = <span class="built_in">setTimeout</span>(<span class="string">&quot;run()&quot;</span>, <span class="number">1000</span>);</span></span><br><span class="line"><span class="language-javascript">		<span class="keyword">if</span>(x==<span class="string">&quot;0&quot;</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">	        time.<span class="title function_">clean</span>();</span></span><br><span class="line"><span class="language-javascript">		&#125;</span></span><br><span class="line"><span class="language-javascript">	&#125;</span></span><br><span class="line"><span class="language-javascript">	<span class="title function_">run</span>();</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h2 id="3-5-Response禁用缓存"><a href="#3-5-Response禁用缓存" class="headerlink" title="3.5. Response禁用缓存"></a>3.5. <strong>Response禁用缓存</strong></h2><p>发送http头，控制浏览器禁止缓存当前文档内容</p>
<p>向页面输出时间，使用IE浏览器查看效果。</p>
<p>设置三个Http头信息禁用浏览器缓存</p>
<p>Cache-Control : no-cachel Pragma : no-cache </p>
<p> Expires: Thu, 01 Dec 1994 16:00:00 GMT (非常特殊，转换特定日期格式才可以 -1)<img src="https://pic.imgdb.cn/item/64a590fb1ddac507cc4e3610.jpg"> </p>
<h2 id="3-6-Response向页面输出中文"><a href="#3-6-Response向页面输出中文" class="headerlink" title="3.6. Response向页面输出中文"></a>3.6. <strong>Response向页面输出中文</strong></h2><p><strong>字节流输出中文</strong></p>
<p>乱码和浏览器的编码有关</p>
<p>设置浏览器默认打开的时候的编码集</p>
<p>获得字节数组的时候，传入一个编码集</p>
<p><strong>字符流输出中文</strong></p>
<p>response的字符流的缓冲区是ISO-8859-1编码.</p>
<p>设置response缓冲区的编码.</p>
<p>设置浏览器的默认打开的时候字符集编码.</p>
<h2 id="3-7-注意事项："><a href="#3-7-注意事项：" class="headerlink" title="3.7. 注意事项："></a>3.7. <strong>注意事项：</strong></h2><p><img src="https://pic.imgdb.cn/item/64a5911c1ddac507cc4e7b44.jpg"> <img src="file:///C:\Users\Lenovo\AppData\Local\Temp\ksohtml23824\wps13.jpg" alt="img"> </p>
<h2 id="3-8-Response文件下载"><a href="#3-8-Response文件下载" class="headerlink" title="3.8. Response文件下载"></a>3.8. <strong>Response文件下载</strong></h2><p><img src="https://pic.imgdb.cn/item/64a591371ddac507cc4eb484.jpg"> </p>
<h2 id="3-9-输出验证码图片"><a href="#3-9-输出验证码图片" class="headerlink" title="3.9. 输出验证码图片"></a>3.9. <strong>输出验证码图片</strong></h2><p>步骤：</p>
<p>1.在内存中生成图片可以使用BufferedImage对象该对象可以获取画笔对象getGraphics()</p>
<p>2.随机生成字母或数字可以使用Random对象</p>
<p>3.把生成的数字或字母写在图片上通过画笔中的方法</p>
<p>4.把图片生成到页面上可以使用ImageIO对象</p>
<h1 id="第四章-请求重定向和请求转发的区别-面试题"><a href="#第四章-请求重定向和请求转发的区别-面试题" class="headerlink" title="第四章 请求重定向和请求转发的区别 (面试题)"></a>第四章 <strong>请求重定向和请求转发的区别 (面试题)</strong></h1><p><img src="https://pic.imgdb.cn/item/64a591441ddac507cc4eda8b.jpg"> </p>
<p>RequestDispatcher.forward方法只能将请求转发给同一个WEB应用中的组件；而HttpServletResponse.sendRedirect 方法还可以重定向到同一个站点上的其他应用程序中的资源，甚至是使用绝对URL重定向到其他站点的资源。<br>如果传递给HttpServletResponse.sendRedirect 方法的相对URL以“&#x2F;”开头，它是相对于服务器的根目录；如果创建RequestDispatcher对象时指定的相对URL以“&#x2F;”开头，它是相对于当前WEB应用程序的根目录。<br>调用HttpServletResponse.sendRedirect方法重定向的访问过程结束后，浏览器地址栏中显示的URL会发生改变，由初始的URL地址变成重定向的目标URL；调用RequestDispatcher.forward 方法的请求转发过程结束后，浏览器地址栏保持初始的URL地址不变。<br>HttpServletResponse.sendRedirect方法对浏览器的请求直接作出响应，响应的结果就是告诉浏览器去重新发出对另外一个URL的访问请求；RequestDispatcher.forward方法在服务器端内部将请求转发给另外一个资源，浏览器只知道发出了请求并得到了响应结果，并不知道在服务器程序内部发生了转发行为。<br>RequestDispatcher.forward方法的调用者与被调用者之间共享相同的request对象和response对象，它们属于同一个访问请求和响应过程；而HttpServletResponse.sendRedirect方法调用者与被调用者使用各自的request对象和response对象，它们属于两个独立的访问请求和响应过程。</p>


                            <!-- Meta -->
                            <div class="post-meta">
                                <hr>
                                <br>
                                <div class="post-tags">
                                    
                                        

<a href="/tags/编程/">#编程</a> <a href="/tags/服务端技术/">#服务端技术</a> <a href="/tags/java/">#java</a> <a href="/tags/request/">#request</a> <a href="/tags/response/">#response</a>


                                            
                                </div>
                                <div class="post-date">
                                    
                                        2023-03-09
                                    
                                </div>
                            </div>
                    </div>

                    <!-- Comments -->
                    <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                        <!-- Disqus Comments -->


                    </div>
                </div>
            </div>
        </article>
</section>

<!-- Image viewer-->

    <!-- Custom picture view-->
    <link href="/css/viewer.min.css" rel="stylesheet" />
    <script
      src="/js/viewer.min.js"
      type="text/javascript"
      charset="utf-8"
    ></script>
    
    <script type="text/javascript">
      // set image viewer
      Viewer.setDefaults({
        zoomRatio: [0.5],
        navbar: false,
        toolbar: false,
        button: false,
        title: [2, (image, imageData) => `${image.alt}`],
        show: function() {
          this.viewer.zoomTo(0.5);
        }
      });
      var imageList = document.getElementsByTagName("img");
      Array.prototype.forEach.call(imageList, element => {
        var viewer = new Viewer(element);
      });
    </script>

    

<!-- TOC -->

    <aside id="article-toc" role="navigation" class="fixed">
        <div id="article-toc-inner">
            <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%AC%AC%E4%B8%80%E7%AB%A0-request-response%E5%AF%B9%E8%B1%A1"><span class="toc-text">第一章 request&amp;response对象</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-1-%E7%AE%80%E4%BB%8B"><span class="toc-text">1.1. 简介</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%AC%AC%E4%BA%8C%E7%AB%A0-HttpServletRequest"><span class="toc-text">第二章 HttpServletRequest</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#2-1-%E5%B8%B8%E7%94%A8%E6%93%8D%E4%BD%9C%EF%BC%9A"><span class="toc-text">2.1. 常用操作：</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-2-%E5%B8%B8%E7%94%A8%E6%96%B9%E6%B3%95%EF%BC%9A"><span class="toc-text">2.2. 常用方法：</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-3-request%E8%8E%B7%E5%8F%96%E5%AE%A2%E6%88%B7%E6%9C%BA%E4%BF%A1%E6%81%AF"><span class="toc-text">3.3. request获取客户机信息</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-4-request%E8%8E%B7%E5%8F%96%E8%AF%B7%E6%B1%82%E5%A4%B4%E4%BF%A1%E6%81%AF"><span class="toc-text">2.4. request获取请求头信息</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-5-request%E8%8E%B7%E5%8F%96%E8%AF%B7%E6%B1%82%E5%8F%82%E6%95%B0"><span class="toc-text">2.5. request获取请求参数</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-6-%E6%A1%88%E4%BE%8B%EF%BC%9A%E5%AE%8C%E6%88%90%E7%94%A8%E6%88%B7%E7%99%BB%E5%BD%95%E5%8A%9F%E8%83%BD"><span class="toc-text">2.6. 案例：完成用户登录功能</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-7-request%E5%88%A9%E7%94%A8%E8%AF%B7%E6%B1%82%E5%9F%9F%E4%BC%A0%E9%80%92%E5%AF%B9%E8%B1%A1"><span class="toc-text">2.7. request利用请求域传递对象</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-8-%E8%BD%AC%E5%8F%91%E9%87%8D%E5%AE%9A%E5%90%91%E7%AE%80%E4%BB%8B"><span class="toc-text">2.8. 转发重定向简介</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%AC%AC%E4%B8%89%E7%AB%A0-HttpServletResponse"><span class="toc-text">第三章 HttpServletResponse</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#3-1-response-%E4%BB%A3%E7%A0%81%E6%A1%88%E4%BE%8B"><span class="toc-text">3.1. response 代码案例</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-2-response-%E6%8C%87%E5%AE%9A%E7%8A%B6%E6%80%81%E7%A0%81-%E5%A4%B4%E4%BF%A1%E6%81%AF"><span class="toc-text">3.2. response 指定状态码&amp;头信息</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-3-response%E7%8A%B6%E6%80%81%E7%A0%81%E5%92%8C%E5%A4%B4%E4%BF%A1%E6%81%AF%E5%BA%94%E7%94%A8"><span class="toc-text">3.3. response状态码和头信息应用</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-4-%E5%8F%91%E9%80%81http%E5%A4%B4%EF%BC%8C%E6%8E%A7%E5%88%B6%E6%B5%8F%E8%A7%88%E5%99%A8%E5%AE%9A%E6%97%B6%E5%88%B7%E6%96%B0%E7%BD%91%E9%A1%B5-refresh"><span class="toc-text">3.4. 发送http头，控制浏览器定时刷新网页(refresh)</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-5-Response%E7%A6%81%E7%94%A8%E7%BC%93%E5%AD%98"><span class="toc-text">3.5. Response禁用缓存</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-6-Response%E5%90%91%E9%A1%B5%E9%9D%A2%E8%BE%93%E5%87%BA%E4%B8%AD%E6%96%87"><span class="toc-text">3.6. Response向页面输出中文</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-7-%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9%EF%BC%9A"><span class="toc-text">3.7. 注意事项：</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-8-Response%E6%96%87%E4%BB%B6%E4%B8%8B%E8%BD%BD"><span class="toc-text">3.8. Response文件下载</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-9-%E8%BE%93%E5%87%BA%E9%AA%8C%E8%AF%81%E7%A0%81%E5%9B%BE%E7%89%87"><span class="toc-text">3.9. 输出验证码图片</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%AC%AC%E5%9B%9B%E7%AB%A0-%E8%AF%B7%E6%B1%82%E9%87%8D%E5%AE%9A%E5%90%91%E5%92%8C%E8%AF%B7%E6%B1%82%E8%BD%AC%E5%8F%91%E7%9A%84%E5%8C%BA%E5%88%AB-%E9%9D%A2%E8%AF%95%E9%A2%98"><span class="toc-text">第四章 请求重定向和请求转发的区别 (面试题)</span></a></li></ol>
        </div>
    </aside>

    <!-- Scripts -->
    <script type="text/javascript">
    console.log("© zchen9 🙋 2015-" + new Date().getFullYear());
</script>
  
    <!-- Google Analytics -->
    

    <!-- Service Worker -->
    <!-- if using service worker -->

    
</body>

</html>